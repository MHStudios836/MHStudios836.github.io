---
permalink: /Admin_Room.html
---
<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>MH Studios™ | HQ Admin</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/fontawesome-all.min.css" />
		<link rel="icon" type="image/x-icon" href="images/Logo_1.png">
		
		<style>
			:root {
				--mh-blue: #0080FF;
				--mh-cyan: #00e5ff;
				--mh-gold: #FFD700;
				--mh-red: #ff004c;
				--mh-dark: #05070a;
			}

			body { background-color: #000; color: #fff; font-family: 'Uni Sans', sans-serif; margin: 0; }
			
			/* HUB LAYOUT */
			#admin-container { display: none; padding: 40px; }
			.admin-nav { display: flex; gap: 20px; border-bottom: 2px solid #222; margin-bottom: 30px; padding-bottom: 10px; }
			.nav-tab { cursor: pointer; color: #666; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
			.nav-tab.active { color: var(--mh-cyan); border-bottom: 2px solid var(--mh-cyan); }

			/* FINANCIAL HUD */
			.fin-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
			.stat-box { background: #0d1117; border: 1px solid #222; padding: 20px; border-left: 4px solid var(--mh-gold); }
			.stat-box h4 { margin: 0; color: #888; font-size: 0.8em; }
			.stat-box span { font-size: 1.8em; font-weight: 900; color: #fff; }

			/* TABLES & FORMS */
			.panel { background: #0a0e14; border: 1px solid #1a1f26; padding: 25px; margin-bottom: 30px; }
			table { width: 100%; border-collapse: collapse; margin-top: 20px; }
			th { text-align: left; color: var(--mh-cyan); border-bottom: 1px solid #333; padding: 10px; font-size: 0.8em; }
			td { padding: 12px; border-bottom: 1px solid #111; font-size: 0.9em; }
			
			.tac-input { width: 100%; background: #000; border: 1px solid #333; color: #fff; padding: 10px; margin: 10px 0; }
			.btn-deploy { background: var(--mh-blue); color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; }

			/* AUTH GATE */
			#gate { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; }
		</style>
	</head>
	<body>

		<div id="gate">
			<h2 style="color:var(--mh-red);">[ SECURITY CLEARANCE REQUIRED ]</h2>
			<p id="auth-status">Verifying credentials...</p>
		</div>

		<div id="admin-container">
			<div class="admin-nav">
				<div class="nav-tab active" onclick="showTab('dashboard')">HQ Dashboard</div>
				<div class="nav-tab" onclick="showTab('inventory')">Asset Inventory</div>
				<div class="nav-tab" onclick="showTab('requests')">Mission Feed</div>
			</div>

			<div id="tab-dashboard" class="tab-content">
				<div class="fin-stats">
					<div class="stat-box"><h4>TOTAL REVENUE</h4><span id="stat-revenue">$0.00</span></div>
					<div class="stat-box" style="border-left-color:var(--mh-blue);"><h4>ACTIVE ASSETS</h4><span id="stat-assets">0</span></div>
					<div class="stat-box" style="border-left-color:var(--mh-cyan);"><h4>PENDING MISSIONS</h4><span id="stat-missions">0</span></div>
				</div>
				
				<div class="panel">
					<h3>Operational Revenue Pulse</h3>
					<p style="color:#666; font-size:0.8em;">Calculated from global sales data and service contracts.</p>
					</div>
			</div>

			<div id="tab-inventory" class="tab-content" style="display:none;">
				<div class="panel">
					<h3>Deploy New Asset</h3>
					<form id="add-product-form" style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
						<input type="text" id="p-name" class="tac-input" placeholder="Product Name" required>
						<input type="number" id="p-price" class="tac-input" placeholder="Price ($)" required>
						<select id="p-branch" class="tac-input">
							<option value="MH Stores™">MH Stores™</option>
							<option value="Creative Arts®">Creative Arts®</option>
							<option value="MH E-Services™">MH E-Services™</option>
						</select>
						<input type="file" id="p-image" class="tac-input">
						<textarea id="p-desc" class="tac-input" placeholder="Product Description" style="grid-column: span 2;"></textarea>
						<button type="submit" class="btn-deploy">INITIALIZE DEPLOYMENT</button>
					</form>
				</div>

				<div class="panel">
					<h3>Current Stockpile</h3>
					<table>
						<thead>
							<tr><th>ASSET</th><th>BRANCH</th><th>PRICE</th><th>STATUS</th></tr>
						</thead>
						<tbody id="inventory-list">
							</tbody>
					</table>
				</div>
			</div>

			<div id="tab-requests" class="tab-content" style="display:none;">
				<div class="panel">
					<h3>Live Mission Stream</h3>
					<table>
						<thead>
							<tr><th>CLIENT</th><th>SECTOR</th><th>URGENCY</th><th>DATE</th></tr>
						</thead>
						<tbody id="mission-list">
							</tbody>
					</table>
				</div>
			</div>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script type="module">
			// 1. IMPORT MASTER KEYS & CORE LOGIC
			import { auth, db, storage, dbID } from './assets/js/firebase-init.js';
			import './assets/js/admin-core.js'; // This handles Security, Users, and Missions!

			// 2. IMPORT FIREBASE TOOLS (For Product Uploads)
			import { 
				collection, addDoc, serverTimestamp 
			} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
			import { 
				ref, uploadBytes, getDownloadURL 
			} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

			// 3. TAB NAVIGATION (UI Logic)
			window.showTab = (tabName) => {
				$('.tab-content').hide();
				$('.nav-tab').removeClass('active');
				$(`#tab-${tabName}`).show();
				$(`.nav-tab:contains('${tabName.toUpperCase()}')`).addClass('active');
			};

			// 4. ADD PRODUCT LOGIC (Synced to MH_STUDIOS_V1)
			$('#add-product-form').on('submit', async (e) => {
				e.preventDefault();
				const btn = $('.btn-deploy');
				const originalText = btn.text();
				btn.text("UPLOADING...").prop('disabled', true);
				
				const file = $('#p-image')[0].files[0];
				let url = "";

				try {
					// A. Upload Image (If exists)
					if(file) {
						const sRef = ref(storage, `products/${Date.now()}_${file.name}`);
						const upSnap = await uploadBytes(sRef, file);
						url = await getDownloadURL(upSnap.ref);
					}

					// B. Save to Database (Using 'dbID')
					await addDoc(collection(db, 'artifacts', dbID, 'products'), {
						name: $('#p-name').val(),
						price: $('#p-price').val(),
						branch: $('#p-branch').val(),
						description: $('#p-desc').val(),
						imageUrl: url,
						createdAt: serverTimestamp()
					});

					alert("ASSET DEPLOYED SUCCESSFULLY.");
					$('#add-product-form')[0].reset();

				} catch (err) {
					console.error(err);
					alert("ERROR: " + err.message);
				}
				btn.text(originalText).prop('disabled', false);
			});
		</script>
	</body>
</html>